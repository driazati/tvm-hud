# @generated DO NOT EDIT MANUALLY
# Generated from .github/templates/update_github_status.yml.j2
# @generated DO NOT EDIT MANUALLY
# Generated from .github/templates/deploy_lambda.yml.j2
name: tvm/apache/v0.8

on:
  schedule:
    - cron: '0 8 * * *'
  workflow_dispatch:

concurrency:
  group: tvm/apache/v0.8
  cancel-in-progress: true

jobs:
  update:
    runs-on: ubuntu-20.04
    steps:
      - name: Checkout
        uses: actions/checkout@v2
      - name: Install dependencies
        run: |
          pip install \
            aiohttp==3.7.4 \
            requests==2.24.0
      - name: Update
        env:
          GH_PAT: ${{ secrets.GITHUB_TOKEN }}
        run: |
          python scripts/update_github_status.py --repo 'tvm' --user 'apache' --branch 'v0.8' --fetch_size 4 --history_size 100
      - name: Upload data
        run: |
          git stash
          git checkout data
          git stash apply
          git add .
          git commit -m"Update commit status data"
          git push
